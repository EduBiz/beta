try{document.execCommand("BackgroundImageCache",false,true)}catch(err){}if(!MB){var MB={lang:{},constant:{},util:{},home:{},onReadyStack:[],onReady:function(b,a,c){MB.onReadyStack.push([b,a,c])},flushOnReady:function(){for(var b=0,a=MB.onReadyStack.length;b<a;b++){if(typeof Ext!="undefined"){Ext.onReady(MB.onReadyStack[b][0],MB.onReadyStack[b][1],MB.onReadyStack[b][2])}}}}}MB.lang=function(){var b={};var a=function(e,d){for(var c in d){e=e.replace("{$"+c+"}",d[c])}return e};return{setLanguage:function(d){for(var c in d){b[c]=d[c]}},get:function(e,f,d,g){var c=e;if(f){if(d==1){if(b[e]){return b[e].replace(/%1/,d).replace(/%d/,d)}else{c=e.replace(/%1/,d).replace(/%d/,d)}}else{if(b[f]){c=b[f].replace(/%1/,d).replace(/%d/,d)}else{c=f.replace(/%1/,d).replace(/%d/,d)}}}else{if(b[e]){c=b[e]}}return a(c,g)},localizeExt:function(){if(Ext.UpdateManager){Ext.UpdateManager.defaults.indicatorText='<div class="loading-indicator">'+_("Loading...")+"</div>"}if(Ext.grid&&Ext.grid.GridPanel){Ext.grid.GridPanel.prototype.ddText=_("{0} selected row{1}")}if(Ext.LoadMask){Ext.LoadMask.prototype.msg=_("Loading...")}Date.monthNames=[_("January"),_("February"),_("March"),_("April"),_("May"),_("June"),_("July"),_("August"),_("September"),_("October"),_("November"),_("December")];Date.getShortMonthName=function(c){return Date.monthNames[c].substring(0,3)};Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.getMonthNumber=function(c){return Date.monthNumbers[c.substring(0,1).toUpperCase()+c.substring(1,3).toLowerCase()]};Date.dayNames=[_("Sunday"),_("Monday"),_("Tuesday"),_("Wednesday"),_("Thursday"),_("Friday"),_("Saturday")];Date.getShortDayName=function(c){return Date.dayNames[c].substring(0,3)};if(Date.parseCodes){Date.parseCodes.S.s="(?:st|nd|rd|th)"}if(Ext.MessageBox){Ext.MessageBox.buttonText={ok:_("OK"),cancel:_("Cancel"),yes:_("Yes"),no:_("No")}}if(Ext.DatePicker){Ext.apply(Ext.DatePicker.prototype,{todayText:_("Today"),minText:_("This date is before the minimum date"),maxText:_("This date is after the maximum date"),disabledDaysText:"",disabledDatesText:"",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:_("Next Month (Control+Right)"),prevText:_("Previous Month (Control+Left)"),monthYearText:_("Choose a month (Control+Up/Down to move years)"),todayTip:_("{0} (Spacebar)"),format:_("m/d/y"),okText:_("&#160;OK&#160;"),cancelText:_("Cancel"),startDay:0})}if(Ext.PagingToolbar){Ext.apply(Ext.PagingToolbar.prototype,{beforePageText:_("Page"),afterPageText:_("of {0}"),firstText:_("First Page"),prevText:_("Previous Page"),nextText:_("Next Page"),lastText:_("Last Page"),refreshText:_("Refresh"),displayMsg:_("Displaying {0} - {1} of {2}"),emptyMsg:_("No data to display")})}if(Ext.grid){Ext.apply(Ext.grid.GridView.prototype,{sortAscText:_("Sort Ascending"),sortDescText:_("Sort Descending"),columnsText:_("Columns")})}}}}();var _=MB.lang.get;function checkAll(b,c){for(var a=0;a<b.elements.length;a++){if(b.elements[a].type=="checkbox"&&b.elements[a].className.indexOf("immuneFromCheckAll")<0){b.elements[a].checked=c.checked}}}MB.util={mergeIntoGetParams:function(f,e,c){f=f||{};var a=document.location.href;var d=/\?(.*)/.exec(document.location);if(d){a=a.substring(0,a.length-d[0].length)}d=d?Ext.urlDecode(d[1]):{};if(c){for(var b=0;b<c.length;++b){if(d[c[b]]!==undefined){delete d[c[b]]}}}d=Ext.apply(d,f);if(e){a=e}return a+"?"+Ext.urlEncode(d)},mergeIntoGetParamsAndReload:function(b,a){document.location=MB.util.mergeIntoGetParams(b,a)},formatPercentage:function(a){return(a==="")?"-":MB.util.formatNumber(a,{round:2,precision:2})+"%"},formatPercentageWithPlus:function(a){return(a==="")?"-":(((a>0)?"+":"")+MB.util.formatNumber(a,{round:2,precision:2})+"%")},formatCurrency2:function(a){return(a===""||!a)?"-":"$"+MB.util.formatNumber(a,{round:2,precision:2})},formatCurrency:function(a){return(a===""||a==0)?"-":"$"+MB.util.formatNumber(a,{round:2,precision:2})},formatInt3:function(a){return(a==="")?"-":MB.util.formatNumber(a,{round:0,precision:0})},formatInt2:function(a){return(a===""||a==0)?"-":MB.util.formatNumber(a,{round:0,precision:0})},formatInt:function(a){return MB.util.formatNumber(a,{round:0,precision:0})},formatFloat:function(a){return(a==="")?"-":MB.util.formatNumber(a,{round:2,precision:2})},formatDay:function(a){return a.format("Y-m-d")},formatHour:function(a){return a.format("y-m-d H:i")},formatSeconds:function(d){if(d===""){return"-"}var a=Math.floor(d/3600);var c=Math.floor((d-a*3600)/60);var b=Math.round(d-a*3600-c*60);a=a<10?("0"+a):a;c=c<10?("0"+c):c;b=b<10?("0"+b):b;return a+":"+c+":"+b},toHours:function(a){return a/3600},toMinutes:function(a){return a/60},truncate:function(a){return MB.util.truncateAtN(a,25)},truncateAtN:function(b,a){if(a<3){a+=3}if(b.length>a){return b.substring(0,a-3)+"..."}else{return b}},inArray:function(d,e){var c=false;for(var f=0,b=d.length;f<b;f++){if(d[f]==e){c=true;break}}return c},formatNumber:function(h,d){if(parseFloat(h)=="NaN"){return h}d=d||{};if(d.grp_sep===false){var g=""}else{if(d.grp_sep){var g=d.grp_sep}else{var g=","}}var a=d.dec_sep||".";var c=(typeof d.round=="undefined")?2:d.round;var b=(typeof d.precision=="undefined")?2:d.precision;h=h.toString();if(h.split){h=h.split(".")}else{return h}if(h.length>2){return h.join(".")}if(c>0&&h.length>1){h[1]=parseFloat("0."+h[1]);h[1]=Math.round(h[1]*Math.pow(10,c))/Math.pow(10,c);h[1]=h[1].toString().split(".")[1]}if(c<=0){h[0]=Math.round(parseInt(h[0])*Math.pow(10,c))/Math.pow(10,c);h[1]=""}if(b>=0){if(h.length>1&&typeof h[1]!="undefined"){h[1]=h[1].substring(0,b)}else{h[1]=""}if(h[1].length<b){for(var e=h[1].length;e<b;e++){h[1]+="0"}}}if(g!=""){var f=/(\d+)(\d{3})/;while(f.test(h[0])){h[0]=h[0].toString().replace(f,"$1"+g+"$2")}}return h[0]+(h.length>1&&h[1]!=""?a+h[1]:"")}};MB.format=MB.util.formatNumber;MB.helpTip=function(){var a=null;return{init:function(){Ext.each(Ext.query(".helpTip"),this.enableForElement)},enableForElement:function(c){var c=Ext.get(c);if(!c.hasClass("helpTipInitialized")){c.addClass("helpTipInitialized");var b=function(f,d){if(a){window.clearTimeout(a);a=null}if(!Ext.get(d).hasClass("helpTip")){d=Ext.get(d).parent(".helpTip").dom}MB.PopUp.showPopUp(d,d.getAttribute("helptip_body"),d.getAttribute("title"),{position:"top",size:d.getAttribute("helptip_body").length>20?"medium":"small"});Ext.get(MB.PopUp.getPopup()).on("mouseover",function(h,g){if(a){window.clearTimeout(a);a=null;Ext.get(g).on("mouseout",function(j,i){a=MB.PopUp.hidePopUp.defer(300,this,[true,c.dom])},this,{single:true})}});c.on("mouseout",function(h,g){a=MB.PopUp.hidePopUp.defer(300,this,[true,c.dom])},this,{single:true})};c.dom.setAttribute("helptip_body",c.dom.getAttribute("alt"));c.dom.setAttribute("alt","");c.on({mouseover:b,click:function(f,d){if(d.href=="undefined"){f.stopEvent()}}})}}}}();MB.adPreview=function(){return{init:function(){Ext.select("a.adPreview").on("click",function(c,b){c.preventDefault();var d=b.getAttribute("rel");if(d==null){d=Ext.get(b).parent("a").dom.getAttribute("rel")}var a=MB.PopUp.showPopUp(b,'<img src="'+MB.constant.base_url+'img/spinner.gif">',_("Ad Preview"));Ext.Ajax.request({url:MB.constant.base_control+"ajax/ad_preview/?id="+d,success:function(f){var e=Ext.decode(f.responseText);a.child(".body").update(e.preview)}})})}}}();function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}MB.home=function(){var showWhichArea=-1;var call_count=0;return{tiles:{tile_iphone:1,tile_marketplace:2,tile_metrics:4,tile_analytics:3},showArea:function(num){if(document.all){eval("document.all.flashHeader.style.display = 'block'")}else{if(document.getElementById&&!document.all){Ext.get("flashHeader").setStyle("display","block")}}showWhichArea=num;try{window.document.loader.SetVariable("buttonClick",num)}catch(e){}},hideArea:function(){if(document.all){eval("document.all.flashHeader.style.display = 'none'")}else{if(document.getElementById&&!document.all){Ext.get("flashHeader").setStyle("display","none")}}},getAreaToLoad:function(){window.document.loader.SetVariable("buttonClick",showWhichArea)},init:function(){if(Ext.get("tiles")){Ext.get("tiles").on("click",function(e){if(MB.home.tiles[e.getTarget().id]){e.stopEvent();e.getTarget().blur();MB.home.showArea(MB.home.tiles[e.getTarget().id])}})}var update=function(){call_count++;if(call_count>100){return}Ext.Ajax.request({url:MB.constant.base_control+"ajax/get_ads_viewed/",success:function(response,ops){var data=response.responseText;if((""!=data)&&(!isNaN(parseInt(data)))&&Ext.get("global_impressions")&&parseInt(data.replace(/,/g,""))>75000000000){Ext.get("global_impressions").update(data)}}})}}}}();var hideArea=MB.home.hideArea;var getAreaToLoad=MB.home.getAreaToLoad;MB.PopUp=function(){var b=null;var d=null;var c="bottom";var i=null;var a;var f,e;var h=function(k,j){if(b&&!k.within(b)){MB.PopUp.hidePopUp()}};var g=function(m,j){var n,q,r=0,k=Ext.get(d),p=b.getWidth(),s=b.getHeight(),l=k.getWidth(),o=k.getHeight();if(c=="top"||c=="bottom"){q=k.getX()-p/2+l/2;Ext.get("popup-arrow").setStyle("left",p/2-Ext.get("popup-arrow").getWidth()/2+"px");if(q+p>Ext.getBody().getWidth()){Ext.get("popup-arrow").setStyle("left",parseInt(Ext.get("popup-arrow").getStyle("left"),10)+p/4+"px");q-=p/4}n=k.getY()+(c=="top"?-1*s+5:o-5)}else{s-=Ext.get("popup-arrow").getHeight();q=k.getX()+l+13;n=k.getY()-s/2+o/2;Ext.get("popup-arrow").setStyle("top",-1*s/2-Ext.get("popup-arrow").getHeight()/2+5+"px")}b.setXY([q,n]);if(j){b.show()}else{b.fadeIn({duration:0.25})}};return{showPopUp:function(l,m,n,k){var j=k||{};if(n){n=n.replace(/^\s*([\S\s]*?)\s*$/,"$1")}else{n=""}c=j.position||"bottom";i=j.size||"large";if(d==l){return false}if(b){b.remove(false)}if(j.close_callback){a=j.close_callback}d=l;switch(c){case"right":Ext.getBody().insertHtml("beforeEnd",["<div id='popup'><div class='",i,"PopUpTop ",c,"'>",(n.length?["<div class='popupTitle titleRed'>",n,"</div>","<img style='float: right;' id='popup-close' src='",MB.constant.base_url,"img/small_close.gif'>"].join(""):""),"<div class='body' id='popup-body'>",m,"</div>","</div><div class='",i,"PopUpBottom ",c,"'>&nbsp;</div>","<div id='popup-arrow' class='popUpArrow popUpArrowRight' style='float: left; position:relative; left: -8px; top: -80px'></div>","</div>"].join(""));break;case"top":Ext.getBody().insertHtml("beforeEnd",["<div id='popup'>","<div class='",i,"PopUpTop ",c,"'>",(n.length?["<div class='popupTitle titleRed'>",n,"</div>","<img style='float: right;' id='popup-close' src='",MB.constant.base_url,"img/small_close.gif'>"].join(""):""),"<div class='body' id='popup-body'>",m,"</div>","</div><div class='",i,"PopUpBottom ",c,"'>&nbsp;</div>","<div id='popup-arrow' class='popUpArrow popUpArrowTop' style='position: relative; top:-6px; left: 0'></div>","</div>"].join(""));break;default:Ext.getBody().insertHtml("beforeEnd",["<div id='popup'>","<div id='popup-arrow' class='popUpArrow' style='position: relative; top:7px; left: 0'></div>","<div class='",i,"PopUpTop ",c,"'><div class='",i,"PopUpBottom ",c,"'>",(n.length?["<div class='popupTitle titleRed'>",n,"</div>","<img style='float: right;' id='popup-close' src='",MB.constant.base_url,"img/small_close.gif'>"].join(""):""),"<div class='body' style='clear: both;' id='popup-body'>",m,"</div></div>","</div>"].join(""));break}b=Ext.get("popup");if(Ext.get("popup-close")){Ext.get("popup-close").on("click",this.hidePopUp)}if(Ext.EventManager.onWindowResize){Ext.EventManager.onWindowResize(g)}Ext.getBody().on("mousedown",h);g();return b},hidePopUp:function(l,k){if(b&&b.isVisible()&&((l&&l.stopEvent)||k==null||d==k)){if(a){a()}var j=function(){if(b){b.remove()}d=null;b=null;if(Ext.EventManager.removeResizeListener){Ext.EventManager.removeResizeListener(g)}Ext.getBody().un("mousedown",h)};if(l){b.fadeOut({callback:j,duration:0.25})}else{j()}}},getPopup:function(){return b},redraw:function(j){g(null,j)}}}();Array.max=function(b){return Math.max.apply(Math,b)};Array.min=function(b){return Math.min.apply(Math,b)};MB.TextInputLabeler=function(e,c,b,a){var d=Ext.get(c);if(!b){var b="labelInput"}if(!a){var a="userInput"}d.getValue=function(){return(d.dom.value==e)?"":d.dom.value};this.handleBlur=this.createBlurHandler(d,e,b,a);this.handleFocus=this.createFocusHandler(d,e,b,a);d.on("blur",this.handleBlur);d.on("focus",this.handleFocus);d.blur();this.handleBlur();d.dom.readOnly=false};MB.TextInputLabeler.prototype.createFocusHandler=function(c,d,b,a){return function(){if(c.dom.value==d){c.dom.value="";c.removeClass(b);c.addClass(a)}}};MB.TextInputLabeler.prototype.createBlurHandler=function(c,d,b,a){return function(){if(c.dom.value==""||c.dom.value==d){c.removeClass(a);c.addClass(b);c.dom.value=d}}};MB.Modal=function(){var d,c,e,a,i,h,f,g=false;return{init:function(){if(g){return}g=true;c=Ext.getBody();d=c.createChild({cls:"ext-el-mask",height:c.getHeight()});d.enableDisplayMode("block");d.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));d.hide();c.addKeyListener(Ext.EventObject.ESC,function(){this.hide()},this);if(e==null){Ext.get(document.body).insertHtml("beforeEnd",["<div id='m_window' class='modalWindow'>","<div class='modalTop'></div>","<div class='modalBottom'>","<div class='modalWindowContent'></div>","</div>","<div class='x-clear'></div>","</div>"].join(""));e=Ext.get("m_window")}},show:function(b){f=b;b.size=b.size||"small";e.child(".modalTop").removeClass(["smallModalTop","mediumModalTop","largeModalTop","customModalTop"]).addClass(b.size+"ModalTop");e.child(".modalBottom").removeClass(["smallModalBottom","mediumModalBottom","largeModalBottom","customModalBottom"]).addClass(b.size+"ModalBottom");if(b.height){e.child(".modalBottom").setStyle("height",b.height+"px")}if(b.width){e.child(".modalTop").setStyle("width",b.width+"px");e.child(".modalBottom").setStyle("width",b.width+"px")}h=b.close_callback;e.child(".modalWindowContent").update(b.content);if(b.confirmation){e.child(".modalWindowContent").insertHtml("beforeEnd",['<div style="text-align: center; padding-right: 16px" class="moduleTiny">','<img id="_modal_spinner" style="visibility: hidden" src="'+MB.constant.base_url+'img/spinner.gif">','<a href="#" id="_modal_confirm_button" class="mbButton"><span>',(b.confirmation.confirm_txt?b.confirmation.confirm_txt:_("Confirm")),'</span></a>&nbsp;&nbsp;<a href="#" id="_modal_cancel_link">',(b.confirmation.cancel_txt?b.confirmation.cancel_txt:_("cancel")),"</a></div></div>"].join(""));e.child(".modalWindowContent").insertHtml("afterBegin",'<h2 class="titleUnderline" style="margin-top: 0pt;">'+(b.confirmation.title?b.confirmation.title:_("Confirm"))+"</h2>");Ext.get("_modal_confirm_button").on("click",function(l,k,m){var j=Ext.get("_modal_confirm_button");if(!j.hasClass("disabled")){Ext.get("_modal_spinner").show();Ext.get("_modal_confirm_button").addClass("disabled");b.confirmation.confirm_callback(l,k,m)}},this,{m_window:e});if(b.confirmation.cancel_callback){Ext.get("_modal_cancel_link").on("click",b.confirmation.cancel_callback,this,{m_window:e})}b.close_el="_modal_cancel_link"}Ext.get(b.close_el).on("click",this.hide);d.show();e.show();this.resize(e,b);if(b.show_callback){b.show_callback(e)}},resize:function(){if(Ext.isIE6){var b=e.getCenterXY();e.setStyle({position:"absolute"});e.setLeftTop(b[0],b[1])}else{if(f.position){e.setStyle({position:f.position})}var j=e.getSize();var k=c.getViewSize();e.setLeftTop(k.width/2-j.width/2,Math.max(k.height/2-j.height/2,0))}},hide:function(j,b){if(j){j.stopEvent()}if(b){Ext.get(b).un("click",this.hide)}e.setStyle({display:"none"});d.hide();if(h){h(j,f)}},resetConfirm:function(){Ext.get("_modal_spinner").hide();Ext.get("_modal_confirm_button").removeClass("disabled")},isShown:function(){return e&&e.isDisplayed()}}}();MB.Slider=function(a){this.enabled=true;this.track_el=Ext.get(a.track_el);this.thumb_el=Ext.get(a.thumb_el);this.change_callback=a.change_callback;this.values={range:(a.values[1]-a.values[0]),min:a.values[0],max:a.values[1]};this.drag_obj=new Ext.dd.DD(this.thumb_el,{});this.drag_obj.constrainTo(this.track_el);this.track_el.on("click",this.clickToJump.createDelegate(this));if(a.input_el){this.input_el=Ext.get(a.input_el);this.drag_obj.onDrag=this.setFormValue.createDelegate(this);if(this.input_el.dom.value){this.setValue(this.input_el.dom.value)}this.thumb_el.setVisible(true);if(this.input_el.dom.disabled){this.setDisabled(true)}else{this.setDisabled(false)}}};MB.Slider.prototype.clickToJump=function(g,c){if(c.id!=this.track_el.id){return}if(!this.enabled){return}g.stopEvent();var f=g.getXY();var b=this.track_el.getBox();var a=this.thumb_el.getBox();var d=Math.round(f[0]-b.x-a.width/2);if(d<0){d=0}else{if(d>b.width-a.width){d=b.width-a.width}}this.thumb_el.setLeft(d);this.drag_obj.onDrag()};MB.Slider.prototype.setValue=function(a){if(a<this.values.min||a>this.values.max){return false}var b=Math.round((this.track_el.getWidth()-this.thumb_el.getWidth())*(a-this.values.min)/this.values.range);this.thumb_el.setLeft(b)};MB.Slider.prototype.getValue=function(){var b=this.thumb_el.getBox();var a=this.track_el.getBox();return this.values.min+(b.x-a.x)*this.values.range/(a.width-b.width)};MB.Slider.prototype.setFormValue=function(){this.input_el.dom.value=Math.round(this.getValue());if(this.change_callback){this.change_callback(Math.round(this.getValue()))}};MB.Slider.prototype.setDisabled=function(a){if(a){this.enabled=false;this.drag_obj.lock();this.track_el.setStyle("background-position","bottom left");this.thumb_el.setStyle("background-position","bottom left")}else{this.enabled=true;this.drag_obj.unlock();this.track_el.setStyle("background-position","top left");this.thumb_el.setStyle("background-position","top left");if(Ext.isIE6){this.drag_obj.constrainTo(this.track_el)}}};MB.Notifications=function(){return{init:function(){Ext.select("img.notificationClose").on("click",this.close);Ext.select("div.notificationUndo a").on("click",this.undo)},undo:function(b,a){b.stopEvent();var c=Ext.get(a).parent("div.dismissableBox").child("div.flashBox");c.parent().setStyle({overflow:"visible",height:"",minHeight:"30px"});Ext.get(a).parent().setStyle("display","none");c.scale(undefined,c.dom.getAttribute("rel"));Ext.Ajax.request({url:MB.constant.base_control+"ajax/notifications/undo/?id="+a.rel,disableCaching:true})},close:function(b,a){var d=a.getAttribute("rel");Ext.Ajax.request({url:MB.constant.base_control+"ajax/notifications/?id="+d,disableCaching:true});var c=Ext.get(a).parent("div.flashBox");c.parent().setStyle({height:c.getHeight()+"px",overflow:"hidden"});c.dom.setAttribute("rel",c.getHeight());c.parent().child("div.notificationUndo").show();c.setStyle("overflow","hidden").setHeight(0,true);c.parent().scale(undefined,30)}}}();MB.onReady(function(){if(typeof Ext!="undefined"){MB.Notifications.init();MB.lang.localizeExt();MB.helpTip.init();if(Ext.isIE6){var b=new Ext.Element();if(b.addClassOnOver){Ext.select("div.plusButton").addClassOnOver("plusButtonOver");Ext.select("div.mbButton").addClassOnOver("mbButtonOver")}var a;Ext.select("#main_nav li").on({mouseover:function(f,d){clearTimeout(a);var c=Ext.get(d).parent("ul");if(!c.hasClass("sub_nav")){c=Ext.get(d).parent("li").child("ul.sub_nav")}Ext.select("#main_nav ul.sub_nav").setStyle("display","none");c.setStyle("display","block")},mouseout:function(f,d){var c=Ext.get(d).parent("ul");if(!c.hasClass("sub_nav")){c=Ext.get(d).parent("li").child("ul.sub_nav")}clearTimeout(a);a=setTimeout(function(){c.setStyle("display","none")},500)}})}}});